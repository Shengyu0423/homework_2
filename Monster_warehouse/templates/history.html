{% extends 'base.html' %}

{% block content %}
    <h3 class="head">History</h3>
    <form action="/history" method="get" class="form-group">
        <div>
            <label for="start_date">Start Date</label>
            <input type="date" name="start_date" id="start_date" class="form-input">
        </div>
        <div>
            <label for="end_date">End Date</label>
            <input type="date" name="end_date" id="end_date" class="form-input">
        </div>
        <div>
            <label for="operation">Operation</label>
            <select type="text" id="flavor" name="operation" class="form-select">
                <option value="">All</option>
                <option value="add">Add</option>
                <option value="substract">Substract</option>
                <option value="purchase">Purchase</option>
                <option value="sale">Sale</option>
            </select>
        </div>
        <div>
            <label for="flavor">Flavor</label>
            <input type="text" id="flavor" placeholder="Original, Mango, Watermelon, etc" name="flavor" class="form-input">
        </div>
        <div>
            <label for="price_per_unit">Price Per Unit</label>
            <input type="number" step="0.01" id="price_per_unit" name="price_per_unit" class="form-input">
        </div>
        <div>
            <label for="quantity">Quantity</label>
            <input type="number" id="quantity" name="quantity" class="form-input">
        </div>
        <div>
            <label for="total_amount">Total Amount</label>
            <input type="number" step="0.01" id="total_amount" name="total_amount" class="form-input">
        </div>
        <div class="btn-group btn-group-block">
            <button class="btn btn-success">Search</button>
            <button class="btn btn-error">Reset</button>
        </div>
    </form>

    <table class="table">
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Operation</th>
                <th>Flavor</th>
                <th>Price Per Unit</th>
                <th>Quantity</th>
                <th>Total Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for record in history %}
                <tr>
                    <td>{{ record.timestamp.strftime("%Y-%m-%d %H:%M:%S") }}</td>
                    <td>{{ record.operation }}</td>
                    <td>{{ record.flavor or '-'}}</td>
                    <td>{{ record.price_per_unit or '-'}}</td>
                    <td>{{ record.quantity or '-'}}</td>
                    <td>{{ record.total_amount }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

